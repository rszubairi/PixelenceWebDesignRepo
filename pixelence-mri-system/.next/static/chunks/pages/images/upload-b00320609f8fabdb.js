(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[798],{36:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/images/upload",function(){return t(8885)}])},8885:function(e,s,t){"use strict";t.r(s);var a=t(5893),l=t(7294),i=t(5539),d=t(1163);s.default=()=>{let[e,s]=(0,l.useState)(null),[t,n]=(0,l.useState)(""),[r,m]=(0,l.useState)([]),[c,x]=(0,l.useState)(!1),[o,h]=(0,l.useState)(0),[u,g]=(0,l.useState)(!1),[j,p]=(0,l.useState)(null),N=(0,d.useRouter)();(0,l.useEffect)(()=>{s(JSON.parse(localStorage.getItem("pixelence_user"))),N.query.jobId&&(n(N.query.jobId),f(N.query.jobId))},[N.query]);let f=async e=>{p({id:e,patientName:"John Smith",age:45,gender:"Male",complaint:"Persistent headaches",causeOfReferral:"Neurological symptoms",referringPhysician:"Dr. Johnson",institution:"General Hospital",scheduledDateTime:"2023-11-20T09:00:00",status:"Scheduled"})},y=async()=>{if(0===r.length){alert("Please select at least one DICOM file to upload.");return}x(!0),h(0);let e=setInterval(()=>{h(s=>s>=100?(clearInterval(e),100):s+10)},500);await new Promise(e=>setTimeout(e,5e3)),x(!1),g(!0)};return e?(0,a.jsx)(i.Z,{user:e,children:(0,a.jsx)("div",{className:"py-6",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"DICOM Image Upload"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Upload DICOM images for patient appointments."}),j&&(0,a.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Appointment Details"}),(0,a.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Job ID"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:j.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Patient Name"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:j.patientName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Age"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:j.age})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Gender"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:j.gender})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Complaint"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:j.complaint})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Cause of Referral"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:j.causeOfReferral})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Referring Physician"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:j.referringPhysician})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Institution"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:j.institution})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Scheduled Date & Time"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(j.scheduledDateTime).toLocaleString()})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Upload DICOM Files"}),!t&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"jobId",className:"form-label",children:"Job ID"}),(0,a.jsx)("input",{id:"jobId",name:"jobId",type:"text",className:"form-input",placeholder:"Enter Job ID",value:t,onChange:e=>n(e.target.value)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"dicomFiles",className:"form-label",children:"Select DICOM Files"}),(0,a.jsx)("input",{id:"dicomFiles",name:"dicomFiles",type:"file",multiple:!0,accept:".dcm,.dicom",className:"form-input",onChange:e=>{m(Array.from(e.target.files))},disabled:c}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"You can select multiple DICOM files at once."})]}),r.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Selected Files:"}),(0,a.jsx)("ul",{className:"border border-gray-200 rounded-md divide-y divide-gray-200",children:r.map((e,s)=>(0,a.jsx)("li",{className:"pl-3 pr-4 py-3 flex items-center justify-between text-sm",children:(0,a.jsxs)("div",{className:"w-0 flex-1 flex items-center",children:[(0,a.jsx)("svg",{className:"flex-shrink-0 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),(0,a.jsx)("span",{className:"ml-2 flex-1 w-0 truncate",children:e.name}),(0,a.jsxs)("span",{className:"ml-4 flex-shrink-0 text-gray-400",children:[(e.size/1024/1024).toFixed(2)," MB"]})]})},s))})]}),c&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Upload Progress"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-purple-600",children:[o,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(o,"%")}})})]}),u&&(0,a.jsx)("div",{className:"mb-4 bg-green-50 border-l-4 border-green-400 p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-green-700",children:"DICOM files uploaded successfully! The images are now being processed."})})]})}),(0,a.jsx)("div",{className:"flex justify-end space-x-3",children:u?(0,a.jsx)("button",{type:"button",className:"btn-primary",onClick:()=>N.push("/appointments/".concat(t)),children:"View Job Status"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>{m([]),h(0),g(!1)},disabled:c,children:"Reset"}),(0,a.jsx)("button",{type:"button",className:"btn-primary",onClick:y,disabled:c||0===r.length||!t,children:c?"Uploading...":"Upload Files"})]})})]})]})})}):(0,a.jsx)("div",{children:"Loading..."})}}},function(e){e.O(0,[873,664,539,888,774,179],function(){return e(e.s=36)}),_N_E=e.O()}]);